# formulario_2
Prueba de formulario y base de datos
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>nivearax</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      background-color: #f4f7fb;
      color: #1a1a1a;
      line-height: 1.5;
    }

    header {
      background-color: #003399;
      color: white;
      padding: 40px 20px;
      text-align: center;
    }

    header h1 {
      margin-bottom: 10px;
    }

    header p {
      font-size: 16px;
      opacity: 0.9;
    }

	  section.acerca {
      background-color: #ffffff;
      padding: 40px 20px;
      border-bottom: 4px solid #003399;
      max-width: 900px;
      margin: 40px auto 0 auto;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    section.acerca h2 {
      color: #003399;
      text-align: center;
      margin-bottom: 20px;
    }

    section.acerca p {
      text-align: justify;
      font-size: 16px;
      color: #333;
    }

    section.catalogo {
      background-color: #ffffff;
      padding: 40px 20px;
      border-top: 4px solid #003399;
    }

    section.catalogo h2 {
      color: #003399;
      text-align: center;
      margin-bottom: 30px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      max-width: 1000px;
      margin: 0 auto;
    }

    .card {
      border: 1px solid #dcdcdc;
      border-radius: 10px;
      padding: 20px;
      background-color: #f9f9ff;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      transition: transform 0.2s ease;
    }

    .card:hover {
      transform: scale(1.03);
    }

    .card h3 {
      color: #003399;
      margin-bottom: 8px;
    }

    .card p {
      font-size: 15px;
      margin-bottom: 10px;
    }

    .card strong {
      display: block;
      color: #000;
      font-weight: bold;
    }

    form {
      background-color: #ffffff;
      padding: 30px;
      margin: 40px auto;
      max-width: 900px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    fieldset {
      border: 2px solid #003399;
      border-radius: 10px;
      padding: 25px 40px;
      margin-bottom: 20px;
    }

    legend {
      color: #003399;
      font-weight: bold;
    }

    label {
      display: block;
      margin: 10px auto 6px auto;
      max-width: 600px;
      text-align: left;
      font-weight: 500;
    }

    input, select, textarea {
      display: block;
      width: 100%;
      max-width: 600px;
      margin: 0 auto 15px auto;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
      font-size: 15px;
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    button {
      background-color: #003399;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 10px;
      font-size: 15px;
      transition: 0.3s ease;
    }

    button:hover {
      background-color: #0050d8;
    }

    .footer {
      background-color: #002c90;
      color: #fff;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
    }

    @media (max-width: 600px) {
      fieldset {
        padding: 20px;
      }

      input, select, textarea {
        max-width: 100%;
      }

      label {
        max-width: 100%;
      }
    }
  </style>
</head>


<body>

  <header>
    <h1>NIVEA <br>
Cuidado Diario para tu Piel</h1>
    <p>Explora nuestro catálogo, conoce más sobre nosotros y realiza tu pedido en línea</p>
  </header>

  <section class="acerca">
    <h2>Acerca de NIVEA</h2>
    <p>
      Somos una de las marcas de cuidado de la piel más confiables del mundo, con más de 100 años de experiencia en el desarrollo de productos dermatológicos. 
      Nuestra misión es ofrecer soluciones innovadoras y accesibles que cuiden, hidraten y protejan la piel de toda la familia.  
      En NIVEA creemos que el cuidado no es solo un acto físico, sino también emocional: cuidar la piel es cuidar de uno mismo y de quienes más quieres.
    </p>
  </section>

  <section class="catalogo">
    <h2>Catálogo de Productos</h2>
    <div class="grid">
      <article class="card">
        <h3>Body Milk 48H</h3>
        <p>&nbsp;Hidratación profunda con aceite de almendra. Ideal para piel seca.</p>
        <p> <strong>$165 MXN</strong> </p>
        <p><strong><img src="milk.jpg" width="204" height="200" alt=""/><br>
        </strong></p>
      </article>

      <article class="card">
        <h3>NIVEA Soft</h3>
        <p>Crema ligera multiusos para rostro y cuerpo. Sensación fresca y suave.</p>
        <p> <strong>$135 MXN</strong> </p>
        <img src="soft.jpg" width="200" height="200" alt=""/>
        <p>&nbsp;</p>
<strong></strong>
        <p><strong><br>
        </strong></p>
      </article>

      <article class="card">
        <h3>Labello Original</h3>
        <p>Protector labial hidratante con brillo natural y suavidad duradera.</p>
        <p> <strong>$70 MXN</strong></p>
        <img src="labello.jpg" width="200" height="200" alt=""/>
        <p>&nbsp;</p>
<strong></strong>
        <p><strong><br>
        </strong></p>
      </article>

      <article class="card">
        <h3>NIVEA Men Creme</h3>
        <p>Crema facial y corporal con rápida absorción, ideal para el cuidado masculino.</p>
        <p> <strong>$120 MXN</strong> </p>
        <img src="men.jpg" width="200" height="200" alt=""/>
        <p>&nbsp;</p>
<strong></strong>
        <p><strong><br>
        </strong></p>
      </article>
    </div>
  </section>

  <form id="formulario_pedido">
    <fieldset>
      <legend>Información Personal</legend>
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="usuario_nombre" placeholder="Nombre o Nombres" required>

      <label for="apellido_p">Apellido Paterno:</label>
      <input type="text" id="apellido_p" name="usuario_apellido_p" placeholder="Apellido Paterno" required>

      <label for="email">Correo electrónico:</label>
      <input type="email" id="email" name="usuario_email" placeholder="tucorreo@ejemplo.com" required>

      <label for="tel">Teléfono:</label>
      <input type="tel" id="tel" name="usuario_tel" placeholder="55 1234 5678" pattern="[0-9\s+]{8,}" required>
    </fieldset>

    <fieldset>
      <legend>Pedido</legend>
      <label for="producto">Selecciona tu producto:</label>
      <select id="producto" name="pedido_item" required>
        <option value="">Selecciona una opción</option>
        <option value="body_milk">Body Milk 48H</option>
        <option value="nivea_soft">NIVEA Soft</option>
        <option value="labello">Labello Original</option>
        <option value="nivea_men">NIVEA Men Creme</option>
      </select>

      <label for="cantidad">Cantidad:</label>
      <input type="number" id="cantidad" name="pedido_cantidad" min="1" value="1" required>

      <label for="fecha">Fecha de entrega deseada:</label>
      <input type="date" id="fecha" name="pedido_fecha" required>

      <label for="hora">Hora preferente:</label>
      <input type="time" id="hora" name="pedido_hora">

      <label for="mensaje">Comentarios o instrucciones:</label>
      <textarea id="mensaje" name="usuario_mensaje" placeholder="Ejemplo: entrega en recepción o especificar presentación."></textarea>
    </fieldset>

    <fieldset>
      <legend>Confirmación</legend>
      <label>
        <input type="checkbox" name="terminos" required>
        Confirmo que la información proporcionada es correcta y acepto los términos.
      </label>
      <br><br>
      <div style="text-align:center;">
        <button type="submit">Enviar Pedido</button>
        <button type="reset">Limpiar</button>
      </div>
</fieldset>  
  </form>
  <div id="mensaje_resultado" style="max-width: 900px; margin: 20px auto; padding: 20px; border-radius: 10px; text-align: center; font-weight: bold;"></div> 

<div class="footer">

  <div class="footer">
    <p>© 2025 NIVEA México — Cuidar la piel es cuidar lo que amas.</p>
  </div>

<script>
  // URL del Apps Script (Asegúrate de que esta URL sea la correcta y desplegada como "cualquier usuario")
  const scriptURL = 'https://script.google.com/macros/s/AKfycbwLwBSrlK_O4r4WW4WSJvZAjaNm3kkVPwIpM6UaUNpVifgdoNQ3j4IQ5ZAtYIXxl_azDA/exec';

  const form = document.getElementById('formulario_pedido');
  const resultadoDiv = document.getElementById('mensaje_resultado');
  const submitButton = form.querySelector('button[type="submit"]');

  form.addEventListener('submit', e => {
    e.preventDefault(); // Evita el envío predeterminado del formulario que recarga la página
    
    // 1. Mostrar estado de carga y deshabilitar botón
    submitButton.disabled = true;
    submitButton.textContent = 'Enviando...';
    resultadoDiv.style.display = 'none'; // Ocultar mensaje anterior

    // 2. Enviar datos de forma asíncrona usando fetch
    fetch(scriptURL, { 
      method: 'POST', 
      body: new FormData(form) // Recolecta todos los datos del formulario
    })
    .then(response => response.json()) // Convierte la respuesta JSON del Apps Script
    .then(data => {
      // 3. Manejar la respuesta
      if (data.result === 'success') {
        resultadoDiv.innerHTML = `✅ **¡Pedido enviado con éxito!** Gracias por tu compra. Te contactaremos pronto. (Registro en fila ${data.row})`;
        resultadoDiv.style.cssText += 'background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;'; // Estilo para éxito
        form.reset(); // Limpia el formulario
      } else {
        resultadoDiv.innerHTML = `❌ **Error al enviar el pedido.** Por favor, inténtalo de nuevo. Error: ${data.error || 'Desconocido'}`;
        resultadoDiv.style.cssText += 'background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;'; // Estilo para error
      }
    })
    .catch(error => {
      // 4. Manejar errores de red o conexión
      console.error('Error:', error);
      resultadoDiv.innerHTML = '⚠️ **Error de red.** Por favor, verifica tu conexión a internet.';
      resultadoDiv.style.cssText += 'background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba;'; // Estilo para advertencia
    })
    .finally(() => {
      // 5. Restablecer el botón y mostrar el mensaje
      submitButton.disabled = false;
      submitButton.textContent = 'Enviar Pedido';
      resultadoDiv.style.display = 'block';
      resultadoDiv.scrollIntoView({ behavior: 'smooth', block: 'start' }); // Mover la vista al mensaje
    });
  });
</script>
	
</body>
</html>
